<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation ‚Äî OpenCastor</title>
  <meta name="description" content="Get started with OpenCastor in 5 minutes. Installation, configuration, AI providers, hardware drivers, and API reference.">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@400;600;700;800&family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
  <style>
    .toc { max-width:720px; margin:0 auto 48px; background:var(--bg-card); border:1px solid var(--border); border-radius:var(--radius-xl); padding:32px 36px; }
    .toc h3 { font-size:1rem; margin-bottom:16px; color:var(--accent); }
    .toc-cols { display:grid; grid-template-columns:1fr 1fr; gap:6px 32px; }
    .toc a { font-size:0.875rem; color:var(--text-secondary); display:block; padding:4px 0; transition:color 0.2s; }
    .toc a:hover { color:var(--accent); }
    @media(max-width:600px){ .toc-cols{grid-template-columns:1fr;} }
    .endpoint-table { width:100%; border-collapse:collapse; margin:16px 0; }
    .endpoint-table th, .endpoint-table td { text-align:left; padding:10px 14px; font-size:0.8125rem; border-bottom:1px solid var(--border); }
    .endpoint-table th { color:var(--text-muted); font-weight:600; text-transform:uppercase; letter-spacing:0.06em; font-size:0.6875rem; }
    .endpoint-table td { font-family:var(--font-mono); color:var(--text-secondary); }
    .endpoint-table .method { color:var(--green); font-weight:600; }
    .endpoint-table .method-post { color:var(--orange); }
    .endpoint-table .method-del { color:var(--red); }
    .doc-section { max-width:720px; margin:0 auto; }
    .doc-section h2 { margin-bottom:16px; }
    .doc-section h3 { margin:28px 0 10px; font-size:1.0625rem; }
    .doc-section p, .doc-section li { font-size:0.9375rem; color:var(--text-secondary); line-height:1.7; }
    .doc-section ul { margin:8px 0 16px 20px; padding:0; list-style:disc; }
    .doc-section li { margin-bottom:6px; }
  </style>
</head>
<body>

<nav class="site-nav">
  <div class="nav-inner">
    <a href="/" class="nav-logo">
      <svg viewBox="0 0 32 32" fill="none"><path d="M11 26 A11 11 0 1 1 23 8 L20 11 A7 7 0 1 0 14 22 Z" fill="currentColor"/><path d="M23 8 L26 5 L23 2 L20 5 Z" fill="currentColor" opacity="0.7"/><path d="M11 26 L8 29 L5 26 L8 23 Z" fill="currentColor" opacity="0.7"/><circle cx="16" cy="16" r="3.5" fill="#6366f1" opacity="0.9"/><circle cx="16" cy="16" r="1.8" fill="#fff" opacity="0.3"/></svg>
      <span>OpenCastor</span>
    </a>
    <div class="nav-links">
      <a href="/hardware">Hardware</a>
      <a href="/docs" class="active">Docs</a>
      <a href="/hub">Hub</a>
      <a href="/about">About</a>
      <a href="https://github.com/craigm26/OpenCastor" class="btn-nav">GitHub <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M7 17L17 7M17 7H7M17 7V17"/></svg></a>
    </div>
    <button class="mobile-toggle" aria-label="Menu"><span></span><span></span><span></span></button>
  </div>
</nav>

<main>
<section class="page-hero">
  <p class="section-label reveal">Documentation</p>
  <h1 class="reveal reveal-d1">From zero to robot<br>in five minutes.</h1>
  <p class="reveal reveal-d2">Everything you need to install, configure, and deploy your first AI-powered robot. v2026.2.19.0</p>
</section>

<!-- Table of Contents -->
<section class="section" style="padding-top:0;padding-bottom:20px">
  <div class="container">
    <div class="toc reveal">
      <h3>üìñ Table of Contents</h3>
      <div class="toc-cols">
        <div>
          <a href="#install">Quick Start</a>
          <a href="#wizard">Setup Wizard</a>
          <a href="#configuration">Configuration (RCAN)</a>
          <a href="#providers">AI Providers Guide</a>
          <a href="#tiered-brain">Tiered Brain Architecture</a>
          <a href="#hailo">Hailo-8 NPU Vision</a>
        </div>
        <div>
          <a href="#oakd">OAK-D Camera</a>
          <a href="#safety">Safety Modules</a>
          <a href="#cli">CLI Reference</a>
          <a href="#api">API Reference</a>
          <a href="#docker">Docker</a>
          <a href="#troubleshooting">Troubleshooting</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Installation / Quick Start -->
<section class="section" id="install" style="padding-top:20px">
  <div class="container">
    <div class="quickstart reveal">
      <h2 style="font-size:1.5rem;margin-bottom:28px">Quick Start</h2>

      <div class="quickstart-step">
        <div class="quickstart-num">1</div>
        <div>
          <h4>Install OpenCastor</h4>
          <p style="font-size:0.9375rem;color:var(--text-secondary);margin-bottom:8px">One command installs everything: Python deps, hardware drivers, and the interactive wizard.</p>
          <div class="code-block" style="margin-bottom:12px">
            <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Linux / macOS</span></div>
            <div class="code-body">curl -sL opencastor.com/install | bash</div>
          </div>
          <div class="code-block" style="margin-bottom:12px">
            <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">pip (all platforms)</span></div>
            <div class="code-body">pip install opencastor</div>
          </div>
          <div class="code-block" style="margin-bottom:12px">
            <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Windows (PowerShell)</span></div>
            <div class="code-body">irm opencastor.com/install.ps1 | iex</div>
          </div>
        </div>
      </div>

      <div class="quickstart-step">
        <div class="quickstart-num">2</div>
        <div>
          <h4>Run the setup wizard</h4>
          <p style="font-size:0.9375rem;color:var(--text-secondary);margin-bottom:8px">The wizard walks you through choosing an AI provider, models, and messaging channels. Generates a validated RCAN config.</p>
          <code>castor wizard</code>
        </div>
      </div>

      <div class="quickstart-step">
        <div class="quickstart-num">3</div>
        <div>
          <h4>Launch</h4>
          <p style="font-size:0.9375rem;color:var(--text-secondary);margin-bottom:8px">Start the runtime. Your robot is now an AI agent accepting commands via WhatsApp, voice, or API.</p>
          <code>castor run --config my_robot.rcan.yaml</code>
        </div>
      </div>

      <div class="quickstart-step">
        <div class="quickstart-num">4</div>
        <div>
          <h4>Verify</h4>
          <p style="font-size:0.9375rem;color:var(--text-secondary);margin-bottom:8px">Run the doctor to check that all dependencies, drivers, and providers are correctly configured.</p>
          <code>castor doctor</code>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Wizard Walkthrough -->
<section class="section" id="wizard">
  <div class="container">
    <div class="section-header reveal" style="text-align:center;margin-left:auto;margin-right:auto">
      <p class="section-label">Setup Wizard</p>
      <h2 class="section-title">What to expect when<br>you run <code style="font-family:var(--font-mono);color:var(--accent)">castor wizard</code></h2>
      <p class="section-desc" style="margin-left:auto;margin-right:auto">The wizard asks six questions, then generates a fully validated RCAN config file.</p>
    </div>

    <div class="wizard-step reveal">
      <div class="wizard-step-header">
        <div class="wizard-step-num">1</div>
        <div><h3>Name your project</h3><p>This becomes the filename for your config and appears in mDNS discovery.</p></div>
      </div>
      <div class="code-block"><div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Terminal</span></div>
        <div class="code-body"><span class="cm">--- PROJECT ---</span>
<span class="cm">Project Name [MyRobot]:</span> <span class="s">Explorer</span></div>
      </div>
    </div>

    <div class="wizard-step reveal">
      <div class="wizard-step-header">
        <div class="wizard-step-num">2</div>
        <div><h3>Choose your AI provider</h3><p>Pick which AI provider powers your robot. All 8 providers are supported.</p></div>
      </div>
      <div class="code-block"><div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Terminal</span></div>
        <div class="code-body"><span class="cm">--- AI PROVIDER ---</span>
<span class="cm">Which AI provider do you want to use?</span>
  <span class="k">[1]</span> <span class="s">Anthropic</span> <span class="v">(Recommended)</span>
  <span class="k">[2]</span> <span class="s">Google</span>
  <span class="k">[3]</span> <span class="s">OpenAI</span>
  <span class="k">[4]</span> <span class="s">Hugging Face</span>  <span class="cm">-- 1M+ models, free tier</span>
  <span class="k">[5]</span> <span class="s">Ollama (Local)</span>  <span class="cm">-- free, runs on your machine</span>
  <span class="k">[6]</span> <span class="s">llama.cpp (Local)</span>  <span class="cm">-- bare-metal inference</span>
  <span class="k">[7]</span> <span class="s">Claude OAuth</span>  <span class="cm">-- use your Claude Pro subscription</span>
  <span class="k">[8]</span> <span class="s">MLX (Apple Silicon)</span>  <span class="cm">-- native GPU, 400+ tok/s on Mac</span>
<span class="cm">Selection [1]:</span> <span class="s">1</span></div>
      </div>
    </div>

    <div class="wizard-step reveal">
      <div class="wizard-step-header">
        <div class="wizard-step-num">3</div>
        <div><h3>Authenticate</h3><p>Anthropic and Google support OAuth. HuggingFace uses CLI login. Ollama and llama.cpp need no auth.</p></div>
      </div>
      <div class="code-block"><div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Terminal ‚Äî Anthropic (OAuth)</span></div>
        <div class="code-body"><span class="cm">--- AUTHENTICATION ---</span>
  <span class="v">[OK]</span> <span class="cm">Opening browser for Anthropic OAuth...</span>
  <span class="v">[OK]</span> <span class="cm">Authenticated successfully. Token saved to .env</span></div>
      </div>
    </div>

    <div class="wizard-step reveal">
      <div class="wizard-step-header">
        <div class="wizard-step-num">4</div>
        <div><h3>Select your primary model</h3><p>Choose the main model for reasoning and decision-making.</p></div>
      </div>
    </div>

    <div class="wizard-step reveal">
      <div class="wizard-step-header">
        <div class="wizard-step-num">5</div>
        <div><h3>Add secondary models <span style="font-weight:400;font-size:0.875rem;color:var(--text-secondary)">(optional)</span></h3><p>Optionally add specialized models for vision, robotics, or fallback.</p></div>
      </div>
    </div>

    <div class="wizard-step reveal">
      <div class="wizard-step-header">
        <div class="wizard-step-num">6</div>
        <div><h3>Connect messaging channels</h3><p>Optionally connect WhatsApp or Telegram for remote control.</p></div>
      </div>
    </div>

    <div class="wizard-step reveal">
      <div class="wizard-step-header">
        <div class="wizard-step-num" style="background:var(--green-light);color:var(--green)">&#10003;</div>
        <div><h3>Config generated</h3><p>The wizard outputs a validated <code style="padding:2px 6px;font-size:0.8125rem">.rcan.yaml</code> config file ready to run.</p></div>
      </div>
    </div>
  </div>
</section>

<!-- Configuration -->
<section class="section alt-section" id="configuration">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">Configuration</p>
      <h2 class="section-title">RCAN YAML Format</h2>
      <p class="section-desc">Every OpenCastor robot is defined by a single <code style="padding:2px 6px;font-size:0.8125rem">.rcan.yaml</code> config file following the RCAN specification.</p>
    </div>

    <div class="code-block reveal" style="max-width:720px;margin:0 auto 32px">
      <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">my_robot.rcan.yaml</span></div>
      <div class="code-body"><span class="k">rcan_version</span>: <span class="s">"1.0.0-alpha"</span>

<span class="k">metadata</span>:
  <span class="k">robot_name</span>: <span class="s">"Explorer"</span>
  <span class="k">robot_uuid</span>: <span class="s">"..."</span>  <span class="cm"># auto-generated by wizard</span>

<span class="cm"># --- Agent Block ---</span>
<span class="k">agent</span>:
  <span class="k">provider</span>: <span class="s">"anthropic"</span>       <span class="cm"># anthropic | google | openai | huggingface | ollama | llamacpp | mlx | claude_oauth</span>
  <span class="k">model</span>: <span class="s">"claude-opus-4-6"</span>
  <span class="k">vision_enabled</span>: <span class="v">true</span>
  <span class="k">safety_stop</span>: <span class="v">true</span>

<span class="cm"># --- Tiered Brain Block ---</span>
<span class="k">tiered_brain</span>:
  <span class="k">planner</span>:
    <span class="k">provider</span>: <span class="s">"anthropic"</span>
    <span class="k">model</span>: <span class="s">"claude-opus-4-6"</span>
    <span class="k">max_latency_ms</span>: <span class="n">5000</span>
  <span class="k">fast_brain</span>:
    <span class="k">provider</span>: <span class="s">"huggingface"</span>
    <span class="k">model</span>: <span class="s">"meta-llama/Llama-3.3-70B-Instruct"</span>
    <span class="k">max_latency_ms</span>: <span class="n">500</span>
  <span class="k">escalation_threshold</span>: <span class="n">0.7</span>  <span class="cm"># confidence below this ‚Üí escalate to planner</span>

<span class="cm"># --- Reactive Block ---</span>
<span class="k">reactive</span>:
  <span class="k">e_stop</span>: <span class="v">true</span>
  <span class="k">collision_avoidance</span>: <span class="v">true</span>
  <span class="k">min_obstacle_distance_cm</span>: <span class="n">15</span>
  <span class="k">max_velocity</span>: <span class="n">1.5</span>            <span class="cm"># m/s</span>

<span class="cm"># --- Camera Block ---</span>
<span class="k">camera</span>:
  <span class="k">type</span>: <span class="s">"oakd"</span>               <span class="cm"># oakd | csi | usb | hailo</span>
  <span class="k">depth_enabled</span>: <span class="v">true</span>
  <span class="k">resolution</span>: <span class="s">"640x480"</span>
  <span class="k">fps</span>: <span class="n">30</span>

<span class="k">physics</span>:
  <span class="k">type</span>: <span class="s">"differential_drive"</span>
  <span class="k">dof</span>: <span class="n">2</span>

<span class="k">drivers</span>:
  - <span class="k">protocol</span>: <span class="s">"pca9685_i2c"</span>
    <span class="k">address</span>: <span class="s">"0x40"</span>

<span class="k">rcan_protocol</span>:
  <span class="k">port</span>: <span class="n">8000</span>
  <span class="k">capabilities</span>: <span class="s">[status, nav, teleop, vision, chat]</span></div>
    </div>

    <div class="doc-section reveal">
      <h3>Key Blocks</h3>
      <ul>
        <li><strong>agent</strong> ‚Äî Primary AI provider, model, and feature flags.</li>
        <li><strong>tiered_brain</strong> ‚Äî Multi-tier architecture: planner (slow/smart), fast_brain (fast/cheap), and escalation rules.</li>
        <li><strong>reactive</strong> ‚Äî Hardware-level safety: e-stop, collision avoidance, velocity limits. Runs below AI.</li>
        <li><strong>camera</strong> ‚Äî Camera configuration: type (oakd, csi, usb, hailo), depth, resolution, FPS.</li>
        <li><strong>physics</strong> ‚Äî Robot kinematics: differential_drive, ackermann, holonomic, arm.</li>
        <li><strong>drivers</strong> ‚Äî Hardware drivers: PCA9685, Dynamixel, GPIO, serial.</li>
        <li><strong>rcan_protocol</strong> ‚Äî Network port and declared RCAN capabilities.</li>
      </ul>
    </div>
  </div>
</section>

<!-- Providers Guide -->
<section class="section" id="providers">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">Providers</p>
      <h2 class="section-title">8 AI providers, zero lock-in.</h2>
      <p class="section-desc">Switch between providers with a single config change. No code rewrites.</p>
    </div>

    <div class="guide-grid">
      <div class="guide-card reveal">
        <h3><span style="color:#D97706">‚óè</span> Anthropic</h3>
        <p>Claude Opus 4, Sonnet 4, Haiku 3.5. Best for complex planning and safety-critical reasoning. API key or OAuth.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "anthropic" ¬∑ ANTHROPIC_API_KEY</div>
      </div>
      <div class="guide-card reveal reveal-d1">
        <h3><span style="color:#4285F4">‚óè</span> Google Gemini</h3>
        <p>Gemini 2.5 Flash, Pro, and Robotics ER. Excellent vision and embodied reasoning. Google AI Studio key.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "google" ¬∑ GOOGLE_API_KEY</div>
      </div>
      <div class="guide-card reveal reveal-d2">
        <h3><span style="color:#10A37F">‚óè</span> OpenAI</h3>
        <p>GPT-4.1, GPT-4o, o3. Strong tool use and function calling. Traditional API key.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "openai" ¬∑ OPENAI_API_KEY</div>
      </div>
      <div class="guide-card reveal reveal-d3">
        <h3><span style="color:#FFD21E">‚óè</span> Hugging Face</h3>
        <p>1M+ models including Llama 3.3, Mistral, Qwen. Free inference API tier. Best for $0 fast brain.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "huggingface" ¬∑ HF_TOKEN</div>
      </div>
      <div class="guide-card reveal reveal-d4">
        <h3><span style="color:#888">‚óè</span> Ollama</h3>
        <p>Run models locally with zero cloud dependency. Llama 3.3, Mistral, Phi-3. No API key needed.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "ollama" ¬∑ no auth required</div>
      </div>
      <div class="guide-card reveal reveal-d5">
        <h3><span style="color:#aaa">‚óè</span> llama.cpp</h3>
        <p>Bare-metal local inference with GGUF models. Lowest latency, smallest footprint. Runs on Pi.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "llamacpp" ¬∑ no auth required</div>
      </div>
      <div class="guide-card reveal">
        <h3><span style="color:#7C3AED">‚óè</span> MLX (Apple Silicon)</h3>
        <p>Native GPU inference on Apple Silicon via mlx-lm or vLLM-MLX. Qwen2.5-VL, Llama 3.3, Mistral. 400+ tok/s on M4 Max. No API key needed.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "mlx" ¬∑ no auth required ¬∑ pip install mlx-lm</div>
      </div>
      <div class="hw-card">
        <h3><span style="color:#D97706">‚óè</span> Claude OAuth</h3>
        <p>Use your existing Claude Pro/Team subscription ‚Äî no separate API key. Browser-based OAuth flow.</p>
        <div class="hw-card-meta" style="margin-top:12px">provider: "claude_oauth" ¬∑ castor login</div>
      </div>
    </div>
  </div>
</section>

<!-- Tiered Brain Architecture -->
<section class="section alt-section" id="tiered-brain">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">Architecture</p>
      <h2 class="section-title">Tiered Cognitive Architecture</h2>
      <p class="section-desc">Three layers of intelligence ‚Äî from reflexive safety to long-horizon planning. Each tier runs independently with automatic escalation.</p>
    </div>

    <div class="arch-visual reveal reveal-d1">
      <div class="arch-tier" style="background: linear-gradient(135deg, rgba(168,85,247,0.08), var(--bg-card));">
        <div class="arch-tier-icon" style="background: var(--purple-light);">üß†</div>
        <div class="arch-tier-content">
          <h3>Planner</h3>
          <p>Long-horizon reasoning, task decomposition, and strategic planning. Claude, GPT-4.1, Gemini. Activated when fast brain confidence drops below <code style="font-size:0.75rem;padding:2px 5px">escalation_threshold</code>.</p>
        </div>
        <span class="arch-tier-badge" style="background: var(--purple-light); color: var(--purple);">~2s latency</span>
      </div>
      <div class="arch-tier" style="background: linear-gradient(135deg, rgba(99,102,241,0.08), var(--bg-card));">
        <div class="arch-tier-icon" style="background: var(--accent-glow);">‚ö°</div>
        <div class="arch-tier-content">
          <h3>Fast Brain</h3>
          <p>Real-time perception and quick decisions. Open-source models via HuggingFace, Ollama, or llama.cpp. Handles 90%+ of routine tasks at ~100ms.</p>
        </div>
        <span class="arch-tier-badge" style="background: var(--accent-glow); color: var(--accent);">~100ms</span>
      </div>
      <div class="arch-tier" style="background: linear-gradient(135deg, rgba(34,197,94,0.08), var(--bg-card));">
        <div class="arch-tier-icon" style="background: var(--green-light);">üõ°Ô∏è</div>
        <div class="arch-tier-content">
          <h3>Reactive Layer</h3>
          <p>Hardware-level safety reflexes ‚Äî emergency stop, collision avoidance, physical bounds. No AI latency ‚Äî pure code. Always active, cannot be overridden by model output.</p>
        </div>
        <span class="arch-tier-badge" style="background: var(--green-light); color: var(--green);">&lt;1ms</span>
      </div>
    </div>

    <div class="doc-section reveal" style="margin-top:40px">
      <h3>How Escalation Works</h3>
      <p>The fast brain handles every incoming request first. If its confidence score falls below the configured <code style="padding:2px 5px;font-size:0.8125rem">escalation_threshold</code> (default 0.7), the request is automatically routed to the planner for deeper reasoning. The reactive layer runs continuously in parallel ‚Äî it intercepts and overrides any command that violates physical safety constraints, regardless of which brain tier issued it.</p>
    </div>
  </div>
</section>

<!-- Hailo-8 Vision -->
<section class="section" id="hailo">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">Vision</p>
      <h2 class="section-title">Hailo-8 NPU Vision</h2>
      <p class="section-desc">Hardware-accelerated object detection at 30+ FPS on edge. No GPU required.</p>
    </div>

    <div class="doc-section reveal">
      <h3>Setup</h3>
      <p>The Hailo-8 M.2 or Hailo-8L module plugs into the Raspberry Pi 5 AI Kit slot or any M.2 host. OpenCastor auto-detects the Hailo runtime and loads optimized YOLOv8 models.</p>

      <div class="code-block" style="margin:16px 0">
        <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Install Hailo runtime</span></div>
        <div class="code-body"><span class="cm"># Install Hailo RT (Pi 5 with AI Kit)</span>
<span class="k">sudo apt install</span> hailo-all
<span class="k">castor doctor</span> --check hailo</div>
      </div>

      <h3>COCO Classes</h3>
      <p>The default YOLOv8 model detects 80 COCO classes out of the box: person, car, bicycle, dog, cat, bottle, chair, and 73 more. Custom models can be loaded via the <code style="padding:2px 5px;font-size:0.8125rem">hailo_model_path</code> config key.</p>

      <h3>Obstacle Detection Config</h3>
      <div class="code-block" style="margin:16px 0">
        <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">rcan.yaml ‚Äî Hailo vision block</span></div>
        <div class="code-body"><span class="k">camera</span>:
  <span class="k">type</span>: <span class="s">"hailo"</span>
  <span class="k">hailo_model</span>: <span class="s">"yolov8s"</span>       <span class="cm"># yolov8n, yolov8s, yolov8m</span>
  <span class="k">confidence_threshold</span>: <span class="n">0.5</span>
  <span class="k">obstacle_classes</span>: <span class="s">[person, dog, cat, chair, car]</span>
  <span class="k">obstacle_action</span>: <span class="s">"stop"</span>       <span class="cm"># stop | slow | avoid</span>
  <span class="k">fps</span>: <span class="n">30</span></div>
      </div>
    </div>
  </div>
</section>

<!-- OAK-D Camera -->
<section class="section alt-section" id="oakd">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">Depth Perception</p>
      <h2 class="section-title">OAK-D Camera</h2>
      <p class="section-desc">Stereo depth perception with on-device neural inference via DepthAI v3.</p>
    </div>

    <div class="doc-section reveal">
      <p>The OAK-D and OAK-D Lite cameras provide stereo depth maps and on-device ML inference. OpenCastor uses DepthAI v3 for low-latency spatial awareness and obstacle mapping.</p>

      <div class="code-block" style="margin:16px 0">
        <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">rcan.yaml ‚Äî OAK-D camera block</span></div>
        <div class="code-body"><span class="k">camera</span>:
  <span class="k">type</span>: <span class="s">"oakd"</span>
  <span class="k">depth_enabled</span>: <span class="v">true</span>
  <span class="k">resolution</span>: <span class="s">"640x480"</span>
  <span class="k">fps</span>: <span class="n">30</span>
  <span class="k">spatial_detection</span>: <span class="v">true</span>   <span class="cm"># 3D object coordinates</span>
  <span class="k">min_depth_cm</span>: <span class="n">20</span>
  <span class="k">max_depth_cm</span>: <span class="n">500</span></div>
      </div>

      <h3>Features</h3>
      <ul>
        <li>Stereo depth maps at up to 30 FPS</li>
        <li>On-device neural inference (MobileNet, YOLO) via OAK VPU</li>
        <li>Spatial object detection ‚Äî returns X/Y/Z coordinates in centimeters</li>
        <li>Compatible with OAK-D, OAK-D Lite, OAK-D Pro</li>
        <li>DepthAI v3 pipeline with automatic device discovery</li>
      </ul>
    </div>
  </div>
</section>

<!-- Safety Modules -->
<section class="section" id="safety">
  <div class="container">
    <div class="section-header reveal" style="text-align:center;margin-left:auto;margin-right:auto">
      <p class="section-label">Safety</p>
      <h2 class="section-title">Built-in safety kernel</h2>
      <p class="section-desc" style="margin-left:auto;margin-right:auto">Multi-layered safety enforced at the runtime level. Cannot be overridden by model output.</p>
    </div>

    <div class="guide-grid">
      <div class="guide-card reveal">
        <h3>üö® Emergency Stop</h3>
        <p>Hardware-level e-stop in every control loop. Triggers on collision proximity, timeout, or manual signal. Sub-millisecond response.</p>
      </div>
      <div class="guide-card reveal reveal-d1">
        <h3>üõ°Ô∏è Anti-Subversion</h3>
        <p>Detects and blocks prompt injection, jailbreak attempts, and any AI output that tries to bypass safety constraints.</p>
      </div>
      <div class="guide-card reveal reveal-d2">
        <h3>‚úÖ Work Authorization</h3>
        <p>Actions require explicit authorization. The robot cannot perform tasks outside its declared capabilities without human approval.</p>
      </div>
      <div class="guide-card reveal reveal-d3">
        <h3>üìê Physical Bounds</h3>
        <p>Enforces velocity limits, workspace boundaries, and collision zones. Hard-coded limits that AI cannot modify.</p>
      </div>
      <div class="guide-card reveal reveal-d4">
        <h3>üìã Tamper-Evident Audit</h3>
        <p>Every command, sensor reading, and safety event is logged with cryptographic hashes. Full audit trail for compliance.</p>
      </div>
      <div class="guide-card reveal reveal-d5">
        <h3>üì° Sensor Monitoring</h3>
        <p>Continuous monitoring of IMU, current draw, temperature, and proximity. Automatic shutdown on anomalous readings.</p>
      </div>
    </div>

    <div class="wizard-after reveal" style="margin-top:40px">
      <h3>Safety CLI commands</h3>
      <div class="code-block">
        <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Terminal</span></div>
        <div class="code-body"><span class="cm"># View active safety rules</span>
<span class="k">castor safety rules</span>

<span class="cm"># Verify audit log integrity</span>
<span class="k">castor audit --verify</span>

<span class="cm"># Live safety monitor</span>
<span class="k">castor monitor --watch</span></div>
      </div>
    </div>
  </div>
</section>

<!-- CLI Reference -->
<section class="section alt-section" id="cli">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">CLI</p>
      <h2 class="section-title">CLI Reference</h2>
      <p class="section-desc">All <code style="padding:2px 6px;font-size:0.8125rem">castor</code> commands at a glance.</p>
    </div>

    <div class="code-block reveal" style="max-width:720px;margin:0 auto">
      <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Terminal</span></div>
      <div class="code-body"><span class="cm"># Core commands</span>
<span class="k">castor run</span> --config robot.rcan.yaml     <span class="cm"># Start the runtime</span>
<span class="k">castor wizard</span>                            <span class="cm"># Interactive setup</span>
<span class="k">castor doctor</span>                            <span class="cm"># Check deps &amp; hardware</span>

<span class="cm"># Hub</span>
<span class="k">castor hub</span> browse                        <span class="cm"># Browse community recipes</span>
<span class="k">castor hub</span> install &lt;recipe-id&gt;            <span class="cm"># Install a recipe</span>
<span class="k">castor hub</span> share --config robot.rcan.yaml <span class="cm"># Share your config</span>

<span class="cm"># Authentication</span>
<span class="k">castor login</span>                             <span class="cm"># OAuth login (Anthropic/Google)</span>
<span class="k">castor login</span> --provider anthropic        <span class="cm"># Provider-specific login</span>

<span class="cm"># Dashboard</span>
<span class="k">castor dashboard-tui</span>                     <span class="cm"># Terminal UI dashboard</span>
<span class="k">castor dashboard</span>                         <span class="cm"># Web dashboard (CastorDash)</span>

<span class="cm"># Utilities</span>
<span class="k">castor safety</span> rules                     <span class="cm"># View safety rules</span>
<span class="k">castor audit</span> --verify                    <span class="cm"># Verify audit log</span>
<span class="k">castor monitor</span> --watch                   <span class="cm"># Live sensor monitor</span></div>
    </div>
  </div>
</section>

<!-- API Reference -->
<section class="section" id="api">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">API</p>
      <h2 class="section-title">REST API Reference</h2>
      <p class="section-desc">The OpenCastor runtime exposes a REST API on the configured RCAN protocol port (default 8000).</p>
    </div>

    <div style="max-width:720px;margin:0 auto;overflow-x:auto" class="reveal">
      <table class="endpoint-table">
        <thead>
          <tr><th>Method</th><th>Endpoint</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td class="method">GET</td><td>/api/status</td><td>Robot status, battery, uptime</td></tr>
          <tr><td class="method">GET</td><td>/api/capabilities</td><td>Declared RCAN capabilities</td></tr>
          <tr><td class="method-post method">POST</td><td>/api/command</td><td>Send an RCAN command</td></tr>
          <tr><td class="method-post method">POST</td><td>/api/nav/goto</td><td>Navigate to coordinates</td></tr>
          <tr><td class="method-post method">POST</td><td>/api/teleop</td><td>Manual teleoperation input</td></tr>
          <tr><td class="method">GET</td><td>/api/vision/snapshot</td><td>Current camera frame + detections</td></tr>
          <tr><td class="method">GET</td><td>/api/vision/depth</td><td>Depth map (OAK-D only)</td></tr>
          <tr><td class="method-post method">POST</td><td>/api/chat</td><td>Send chat message to agent</td></tr>
          <tr><td class="method">GET</td><td>/api/safety/rules</td><td>Active safety rules</td></tr>
          <tr><td class="method">GET</td><td>/api/audit/log</td><td>Audit log entries</td></tr>
          <tr><td class="method-post method">POST</td><td>/api/estop</td><td>Trigger emergency stop</td></tr>
          <tr><td class="method-del method">DELETE</td><td>/api/estop</td><td>Release emergency stop</td></tr>
          <tr><td class="method">GET</td><td>/ws/stream</td><td>WebSocket: real-time sensor data</td></tr>
        </tbody>
      </table>
    </div>

    <div class="code-block reveal" style="max-width:720px;margin:24px auto 0">
      <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Example ‚Äî Send a command</span></div>
      <div class="code-body"><span class="k">curl</span> -X POST http://localhost:8000/api/command \
  -H <span class="s">"Content-Type: application/json"</span> \
  -d <span class="s">'{"action": "nav.goto", "params": {"x": 1.0, "y": 2.5}}'</span></div>
    </div>
  </div>
</section>

<!-- Docker -->
<section class="section alt-section" id="docker">
  <div class="container">
    <div class="section-header reveal" style="text-align:center;margin-left:auto;margin-right:auto">
      <p class="section-label">Docker</p>
      <h2 class="section-title">Run in a container</h2>
      <p class="section-desc" style="margin-left:auto;margin-right:auto">Deploy OpenCastor with Docker for reproducible builds and production deployments.</p>
    </div>

    <div class="code-block reveal" style="max-width:720px;margin:0 auto">
      <div class="code-header"><div class="code-dots"><span></span><span></span><span></span></div><span class="code-filename">Terminal</span></div>
      <div class="code-body"><span class="cm"># Clone and start</span>
<span class="k">git clone</span> https://github.com/craigm26/OpenCastor.git
<span class="k">cd</span> OpenCastor
<span class="k">docker compose up -d</span>

<span class="cm"># Custom config</span>
<span class="k">docker compose run</span> <span class="s">-v ./my_robot.rcan.yaml:/app/config.rcan.yaml</span> \
  <span class="s">--env-file .env</span> \
  castor run --config /app/config.rcan.yaml</div>
    </div>
  </div>
</section>

<!-- Troubleshooting -->
<section class="section" id="troubleshooting">
  <div class="container">
    <div class="section-header center reveal">
      <p class="section-label">Help</p>
      <h2 class="section-title">Troubleshooting</h2>
    </div>

    <div style="max-width:720px;margin:0 auto">
      <div class="faq-item reveal">
        <div class="faq-q">castor doctor shows "Hailo not found"</div>
        <div class="faq-a">Install the Hailo runtime with <code style="padding:2px 5px;font-size:0.8125rem">sudo apt install hailo-all</code> and reboot. Ensure your Pi 5 has the AI Kit M.2 module properly seated.</div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q">OAK-D camera not detected</div>
        <div class="faq-a">Run <code style="padding:2px 5px;font-size:0.8125rem">pip install depthai</code> to install DepthAI v3. Check USB3 connection ‚Äî OAK-D requires USB3 for depth. Try <code style="padding:2px 5px;font-size:0.8125rem">python -c "import depthai; print(depthai.Device.getAllAvailableDevices())"</code></div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q">Provider authentication fails</div>
        <div class="faq-a">Run <code style="padding:2px 5px;font-size:0.8125rem">castor login --provider &lt;name&gt;</code> to re-authenticate. Check that your <code style="padding:2px 5px;font-size:0.8125rem">.env</code> file has the correct key name (ANTHROPIC_API_KEY, GOOGLE_API_KEY, etc.).</div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q">PCA9685 I2C not responding</div>
        <div class="faq-a">Verify I2C is enabled: <code style="padding:2px 5px;font-size:0.8125rem">sudo raspi-config</code> ‚Üí Interface Options ‚Üí I2C. Check wiring and run <code style="padding:2px 5px;font-size:0.8125rem">i2cdetect -y 1</code> to confirm address 0x40.</div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q">Robot moves erratically or too fast</div>
        <div class="faq-a">Check your <code style="padding:2px 5px;font-size:0.8125rem">reactive.max_velocity</code> setting. Default is 1.5 m/s. Lower it for indoor use. Also verify your motor calibration in the drivers block.</div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q">WhatsApp QR code not scanning</div>
        <div class="faq-a">Ensure your Pi has internet access. The WhatsApp bridge needs to download session data on first connect. Try <code style="padding:2px 5px;font-size:0.8125rem">castor wizard</code> again and select the WhatsApp channel option.</div>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta-section">
  <h2 class="reveal">Ready to build?</h2>
  <p class="reveal reveal-d1">Join the community and start building intelligent robots today.</p>
  <div class="hero-actions reveal reveal-d2">
    <a href="https://github.com/craigm26/OpenCastor" class="btn btn-primary btn-lg">
      <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.09.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836a9.59 9.59 0 012.504.337c1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/></svg>
      View on GitHub
    </a>
    <a href="https://discord.gg/jMjA8B26Bq" class="btn btn-secondary btn-lg">Join our Discord</a>
  </div>
</section>
</main>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-grid">
      <div class="footer-brand">
        <a href="/" class="nav-logo"><svg viewBox="0 0 32 32" width="24" height="24" fill="none"><path d="M11 26 A11 11 0 1 1 23 8 L20 11 A7 7 0 1 0 14 22 Z" fill="currentColor" style="color:var(--accent)"/><path d="M23 8 L26 5 L23 2 L20 5 Z" fill="currentColor" style="color:var(--accent)" opacity="0.7"/><path d="M11 26 L8 29 L5 26 L8 23 Z" fill="currentColor" style="color:var(--accent)" opacity="0.7"/><circle cx="16" cy="16" r="3.5" fill="#6366f1" opacity="0.9"/><circle cx="16" cy="16" r="1.8" fill="#fff" opacity="0.3"/></svg><span>OpenCastor</span></a>
        <p>The universal runtime for embodied AI.</p>
      </div>
      <div class="footer-col"><h4>Product</h4><a href="/docs">Documentation</a><a href="/hardware">Hardware</a><a href="https://rcan.dev/spec/">RCAN Spec</a><a href="https://pypi.org/project/opencastor/">PyPI</a></div>
      <div class="footer-col"><h4>Resources</h4><a href="/docs">Getting Started</a><a href="https://github.com/craigm26/OpenCastor">GitHub</a><a href="https://github.com/craigm26/OpenCastor/issues">Issues</a><a href="https://discord.gg/jMjA8B26Bq">Discord</a></div>
      <div class="footer-col"><h4>Company</h4><a href="/hub">Hub</a><a href="/about">About</a><a href="mailto:hello@opencastor.com">Contact</a></div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025-2026 Craig Merry. Apache 2.0 License.</p>
      <div class="footer-social">
        <a href="https://github.com/craigm26" aria-label="GitHub"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.09.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836a9.59 9.59 0 012.504.337c1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/></svg></a>
        <a href="https://twitter.com/opencastor" aria-label="Twitter / X"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
        <a href="https://discord.gg/jMjA8B26Bq" aria-label="Discord"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.095 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.095 2.157 2.42 0 1.333-.947 2.418-2.157 2.418z"/></svg></a>
      </div>
    </div>
  </div>
</footer>

<script>
const toggle = document.querySelector('.mobile-toggle');
const navLinks = document.querySelector('.nav-links');
toggle.addEventListener('click', function() { navLinks.classList.toggle('open'); toggle.classList.toggle('active'); document.body.style.overflow = navLinks.classList.contains('open') ? 'hidden' : ''; });
document.querySelectorAll('.nav-links a').forEach(a => { a.addEventListener('click', () => { navLinks.classList.remove('open'); toggle.classList.remove('active'); document.body.style.overflow = ''; }); });
const nav = document.querySelector('.site-nav');
window.addEventListener('scroll', () => nav.classList.toggle('scrolled', window.scrollY > 20), { passive: true });
nav.classList.toggle('scrolled', window.scrollY > 20);
const ro = new IntersectionObserver((entries) => { entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); ro.unobserve(e.target); } }); }, { threshold: 0.08, rootMargin: '0px 0px -40px 0px' });
document.querySelectorAll('.reveal').forEach(el => ro.observe(el));
document.querySelectorAll('a[href^="#"]').forEach(a => {
  a.addEventListener('click', e => { e.preventDefault(); const t = document.querySelector(a.getAttribute('href')); if (t) t.scrollIntoView({ behavior: 'smooth', block: 'start' }); });
});
</script>
</body>
</html>
